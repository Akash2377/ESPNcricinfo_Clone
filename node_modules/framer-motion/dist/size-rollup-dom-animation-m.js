import*as t from"react";import n,{createContext as e,useContext as r,useLayoutEffect as o,useEffect as a,useRef as s,useCallback as i,useMemo as u,forwardRef as c,createElement as l}from"react";import{i as d,P as m,M as f,a as p,b as g,c as y,f as v,u as h,g as S,S as E,L as w,d as C,e as V,h as A,j as M,k as P,r as T,l as b,m as j,n as x,s as D,o as L,p as B}from"./size-rollup-dom-max-assets.js";const F=e({});const I=d?o:a,O=e({strict:!1});function R(t,n,e,o){const i=r(F).visualElement,u=r(O),c=r(m),l=r(f).reducedMotion,d=s(void 0);o=o||u.renderer,!d.current&&o&&(d.current=o(t,{visualState:n,parent:i,props:e,presenceId:c?c.id:void 0,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:l}));const p=d.current;return I(()=>{p&&p.syncRender()}),a(()=>{p&&p.animationState&&p.animationState.animateChanges()}),I(()=>()=>p&&p.notifyUnmount(),[]),p}function k(t){const{initial:n,animate:e}=function(t,n){if(g(t)){const{initial:n,animate:e}=t;return{initial:!1===n||y(n)?n:void 0,animate:y(e)?e:void 0}}return!1!==t.inherit?n:{}}(t,r(F));return u(()=>({initial:n,animate:e}),[H(n),H(e)])}function H(t){return Array.isArray(t)?t.join(" "):t}let U=1;class N extends n.Component{getSnapshotBeforeUpdate(){const{visualElement:t,props:n}=this.props;return t&&t.setProps(n),null}componentDidUpdate(){}render(){return this.props.children}}function K({preloadedFeatures:n,createVisualElement:e,projectionNodeConstructor:o,useRender:a,useVisualState:s,Component:u}){return n&&function(t){for(const n in t)"projectionNodeConstructor"===n?v.projectionNodeConstructor=t[n]:v[n].Component=t[n]}(n),c((function(c,l){const m={...r(f),...c,layoutId:W(c)},{isStatic:g}=m;let y=null;const w=k(c),C=g?void 0:h(()=>{if(S.hasEverUpdated)return U++}),V=s(c,g);if(!g&&d){w.visualElement=R(u,V,m,e);const t=r(O).strict,a=r(E);w.visualElement&&(y=w.visualElement.loadFeatures(c,t,n,C,o||v.projectionNodeConstructor,a))}return t.createElement(N,{visualElement:w.visualElement,props:m},y,t.createElement(F.Provider,{value:w},a(u,c,C,function(t,n,e){return i(r=>{r&&t.mount&&t.mount(r),n&&(r?n.mount(r):n.unmount()),e&&("function"==typeof e?e(r):p(e)&&(e.current=r))},[n])}(V,w.visualElement,l),V,g,w.visualElement)))}))}function W({layoutId:t}){const n=r(w).id;return n&&void 0!==t?n+"-"+t:t}const _=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}});function q(t,n,e){for(const r in n)C(n[r])||V(r,e)||(t[r]=n[r])}function z(t,n,e){const r={};return q(r,t.style||{},t),Object.assign(r,function({transformTemplate:t},n,e){return u(()=>{const r={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};return A(r,n,{enableHardwareAcceleration:!e},t),Object.assign({},r.vars,r.style)},[n])}(t,n,e)),t.transformValues?t.transformValues(r):r}function X(t,n,e){const r={},o=z(t,n,e);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),r.style=o,r}const Y=new Set(["initial","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onHoverStart","onHoverEnd","layoutScroll","whileInView","onViewportEnter","onViewportLeave","viewport","whileTap","onTap","onTapStart","onTapCancel","animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView","onPan","onPanStart","onPanSessionStart","onPanEnd"]);function G(t){return Y.has(t)}let J=t=>!G(t);try{(Q=require("@emotion/is-prop-valid").default)&&(J=t=>t.startsWith("on")?!G(t):Q(t))}catch(t){}var Q;const Z=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}});function $(t,n){const e=u(()=>{const e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}};return M(e,n,{enableHardwareAcceleration:!1},t.transformTemplate),{...e.attrs,style:{...e.style}}},[n]);if(t.style){const n={};q(n,t.style,t),e.style={...n,...e.style}}return e}function tt(t=!1){return(n,e,r,o,{latestValues:a},s)=>{const i=(P(n)?$:X)(e,a,s),u={...function(t,n,e){const r={};for(const o in t)(J(o)||!0===e&&G(o)||!n&&!G(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}(e,"string"==typeof n,t),...i,ref:o};return r&&(u["data-projection-id"]=r),l(n,u)}}const nt=t=>(n,e)=>{const o=r(F),a=r(m),s=()=>function({scrapeMotionValuesFromProps:t,createRenderState:n,onMount:e},r,o,a){const s={latestValues:et(r,o,a,t),renderState:n()};return e&&(s.mount=t=>e(r,t,s)),s}(t,n,o,a);return e?s():h(s)};function et(t,n,e,r){const o={},a=r(t);for(const t in a)o[t]=T(a[t]);let{initial:s,animate:i}=t;const u=g(t),c=b(t);n&&c&&!u&&!1!==t.inherit&&(void 0===s&&(s=n.initial),void 0===i&&(i=n.animate));let l=!!e&&!1===e.initial;l=l||!1===s;const d=l?i:s;if(d&&"boolean"!=typeof d&&!j(d)){(Array.isArray(d)?d:[d]).forEach(n=>{const e=x(t,n);if(!e)return;const{transitionEnd:r,transition:a,...s}=e;for(const t in s){let n=s[t];if(Array.isArray(n)){n=n[l?n.length-1:0]}null!==n&&(o[t]=n)}for(const t in r)o[t]=r[t]})}return o}const rt={useVisualState:nt({scrapeMotionValuesFromProps:D,createRenderState:Z,onMount:(t,n,{renderState:e,latestValues:r})=>{try{e.dimensions="function"==typeof n.getBBox?n.getBBox():n.getBoundingClientRect()}catch(t){e.dimensions={x:0,y:0,width:0,height:0}}M(e,r,{enableHardwareAcceleration:!1},t.transformTemplate),L(n,e)}})},ot={useVisualState:nt({scrapeMotionValuesFromProps:B,createRenderState:_})};const at=function(t){function n(n,e={}){return K(t(n,e))}if("undefined"==typeof Proxy)return n;const e=new Map;return new Proxy(n,{get:(t,r)=>(e.has(r)||e.set(r,n(r)),e.get(r))})}((function(t,{forwardMotionProps:n=!1},e,r,o){return{...P(t)?rt:ot,preloadedFeatures:e,useRender:tt(n),createVisualElement:r,projectionNodeConstructor:o,Component:t}}));export{at as m};
